# Contract Review Agent
# Agent Factory Spec v1
# Target: GCC (Government Community Cloud)

name: Contract Review Agent
version: "1.0.0"

metadata:
  description: "AI assistant that helps federal contract specialists review and analyze government contracts"
  author: "CSA Team"
  cloud: gcc  # commercial | gcc | gcch | dod
  language: en-US

# Core agent instructions (system prompt)
instructions: |
  You are a helpful AI assistant that specializes in reviewing federal government contracts.
  
  Your role is to:
  - Help users understand contract terms and conditions
  - Identify potential compliance issues
  - Answer questions about FAR (Federal Acquisition Regulation) clauses
  - Summarize key contract provisions
  
  Always be professional and accurate. If you're unsure about something, say so.
  Never provide legal advice - recommend consulting with a contracting officer or legal counsel when appropriate.

# Optional greeting override
greeting: "Hello! I'm your Contract Review Assistant. How can I help you with federal contracts today?"

# Optional fallback message
fallbackMessage: "I'm not sure I understand. Could you rephrase your question about the contract?"

# Optional escalation message
escalationMessage: "I'll connect you with a contracting specialist. Please hold while I transfer you."

# Agent capabilities
capabilities:
  - generative_actions
  - knowledge_search

# Knowledge sources
knowledge:
  - type: sharepoint
    name: "FAR Library"
    url: "https://contoso.sharepoint.com/sites/FAR"
  - type: website
    name: "Acquisition.gov"
    url: "https://www.acquisition.gov"

# Custom topics
topics:
  - name: Contract Summary
    description: "Summarize key terms of a contract"
    triggers:
      phrases:
        - "summarize this contract"
        - "give me a summary"
        - "what are the key terms"
        - "overview of contract"
    actions:
      - type: question
        prompt: "Please paste the contract text or upload a document, and I'll summarize the key terms for you."
        variable: ContractText
        entity: string
      - type: generative_answer
      - type: message
        text: "Is there anything specific about this contract you'd like me to clarify?"

  - name: FAR Clause Lookup
    description: "Look up and explain FAR clauses"
    triggers:
      phrases:
        - "explain FAR clause"
        - "what does FAR say about"
        - "FAR requirement"
        - "acquisition regulation"
    actions:
      - type: question
        prompt: "Which FAR clause number or topic would you like me to explain?"
        variable: FARQuery
        entity: string
      - type: generative_answer
      - type: message
        text: "Would you like me to look up any related clauses?"

  - name: Compliance Check
    description: "Check contract for compliance issues"
    triggers:
      phrases:
        - "check compliance"
        - "compliance review"
        - "is this compliant"
        - "regulatory compliance"
    actions:
      - type: message
        text: "I'll help you check for compliance issues. Please note this is not a substitute for official legal review."
      - type: question
        prompt: "Please describe the contract terms or paste the relevant section you'd like me to review."
        variable: ComplianceText
        entity: string
      - type: generative_answer
      - type: condition
        conditions:
          - if: "=contains(Topic.Answer, 'issue')"
            then:
              - type: message
                text: "I've identified some potential issues. Would you like me to connect you with a compliance specialist?"
              - type: question
                prompt: "Would you like to escalate to a compliance specialist?"
                variable: EscalateDecision
                entity: boolean
        else:
          - type: message
            text: "No obvious compliance issues detected. However, I recommend official review for important contracts."

# Connectors (Power Platform connections)
connectors:
  - name: SharePointOnline
    type: standard
    connection_reference: "shared_sharepointonline"
  - name: AzureOpenAI
    type: custom
    connection_reference: "shared_azureopenai"

# Security settings
security:
  authentication:
    mode: Integrated
    provider: AzureAD
  data_classification: CUI  # Controlled Unclassified Information
